---
import SectionCopy from '../SectionCopy.astro';
import PurpleStardust from './PurpleStardust.astro';
import AdoptionPanel from './AdoptionPanel.astro';
import livingDocScreenshot from '~/assets/screenshots/living-doc.png';
import auditScreenshot from '~/assets/screenshots/audit.png';
import codeJpaScreenshot from '~/assets/screenshots/code-jpa.png';
---

<section class="mt-20 md:mt-24 lg:mt-28 xl:mt-36 relative">
	<div class="w-full max-w-screen-xl mx-auto px-4 sm:px-8">
		<SectionCopy
			label="Cas d'usage"
			title="Auditer, documenter, migrer."
			gradient="bg-blue-purple-gradient"
		>
			HexaGlue s'adapte à votre contexte :
			<ul>
				<li>Auditez la conformité DDD et hexagonale de votre code existant</li>
				<li>Accompagnez progressivement une migration vers le DDD et l'architecture hexagonale</li>
				<li>Automatisez la production des adaptateurs d'infrastructure</li>
			</ul>
		</SectionCopy>
	</div>

	<PurpleStardust height="h-64 lg:h-80 xl:h-96" />

	<div class="mx-auto w-full max-w-screen-xl px-4 sm:px-8 space-y-16 md:space-y-24">
		<AdoptionPanel
			id="1"
			icon="ri:shield-check-line"
			gradient="red-pink"
			title="Auditer l'existant"
			image={auditScreenshot}
			imageAlt="Rapport d'audit d'architecture HexaGlue"
			imagePosition="right"
		>
			Mesurez la conformité DDD et hexagonale de votre codebase : score global, détection des violations, métriques par composant.<br><br>
			<ul>
				<li>Des recommandations claires pour migrer vers le DDD et l'architecture hexagonale.</li>
				<li>Des métriques exploitables directement dans vos pipelines CI/CD.</li>
			</ul>
		</AdoptionPanel>
		<AdoptionPanel
			id="2"
			icon="ri:file-list-3-line"
			gradient="orange-yellow"
			title="Documenter votre architecture"
			image={livingDocScreenshot}
			imageAlt="Living documentation générée par HexaGlue"
			imagePosition="left"
		>
			Générez une documentation vivante de votre domaine : agrégats, entités, services, ports.<br><br>
			<strong>Toujours à jour, sans effort de maintenance.</strong>
		</AdoptionPanel>
		<AdoptionPanel
			id="3"
			icon="ri:code-box-line"
			gradient="blue-purple"
			title="Migrer facilement"
			image={codeJpaScreenshot}
			imageAlt="Code JPA généré automatiquement par HexaGlue"
			imagePosition="right"
		>
			Automatisez la production des adaptateurs d'infrastructure : entités JPA, repositories, code d'intégration.<br><br>
			<strong>Le code généré est aligné sur l'architecture hexagonale cible.</strong>
		</AdoptionPanel>
	</div>
</section>

<script>
	const observer = new IntersectionObserver((entries) => {
		entries.forEach((entry) => {
			if (entry.isIntersecting) {
				entry.target.classList.add('is-visible');
				observer.unobserve(entry.target);
			}
		});
	}, { threshold: 0.15, rootMargin: '0px 0px -100px 0px' });

	document.querySelectorAll('.scroll-reveal').forEach((el) => observer.observe(el));
</script>
