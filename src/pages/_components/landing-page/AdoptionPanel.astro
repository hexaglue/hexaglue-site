---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import { Icon } from 'astro-icon/components';

interface Props {
	id: string;
	tab: string;
	class?: string;
	icon: string;
	title: string;
	description: string;
	features: string[];
	image?: ImageMetadata;
	imageAlt?: string;
}

const { id, tab, class: className, icon, title, description, features, image, imageAlt } = Astro.props;
---

<div
	id={`adoption-panel-${id}`}
	role="tabpanel"
	aria-labelledby={`adoption-tab-${id}`}
	data-tab={tab}
	class:list={['adoption-panel', className]}
>
	<div
		class="p-6 sm:p-8 bg-astro-dark-800/40 border border-astro-dark-100/15 rounded-xl"
	>
		<div class:list={[image && 'flex flex-col lg:flex-row lg:items-center gap-6 lg:gap-10']}>
			<div class:list={['flex flex-col md:flex-row md:items-start gap-6', image && 'flex-1']}>
				<div class="shrink-0 p-3 rounded-xl bg-blue-green-gradient/10 text-astro-green">
					<Icon name={icon} class="size-8" aria-hidden="true" />
				</div>

				<div class="flex-1 space-y-4">
					<h3 class="text-xl font-semibold text-white">{title}</h3>
					<p class="text-astro-gray-200 font-light">{description}</p>

					<ul class="space-y-2">
						{
							features.map((feature) => (
								<li class="flex items-center gap-2 text-sm text-astro-gray-100">
									<Icon
										name="ri/check-line"
										class="size-4 text-astro-green shrink-0"
										aria-hidden="true"
									/>
									{feature}
								</li>
							))
						}
					</ul>
				</div>
			</div>

			{image && (
				<div class="adoption-panel-image lg:w-[45%] lg:shrink-0">
					<Image
						src={image}
						alt={imageAlt ?? ''}
						widths={[400, 600, 800]}
						sizes="(max-width: 1024px) 100vw, 45vw"
						class="w-full h-auto rounded-xl shadow-2xl"
						loading="lazy"
					/>
				</div>
			)}
		</div>
	</div>
</div>

<style>
	.adoption-panel-image {
		opacity: 0;
		transform: translateX(10rem);
		transition: opacity 500ms ease-out, transform 500ms ease-out;
	}

	.adoption-panel-image.is-visible {
		opacity: 1;
		transform: translateX(0);
	}
</style>
