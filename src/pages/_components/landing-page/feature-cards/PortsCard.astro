---
import FeatureCard from './FeatureCard.astro';
---

<FeatureCard
	icon="hexaglue/pipeline"
	title="DÃ©tection des Ports et Adapteurs"
	description="Identifie automatiquement les ports driving et driven de votre architecture hexagonale."
>
	<div slot="illustration" class="ports-illustration mt-4 pt-4 border-t border-astro-dark-100/10">
		<!-- Dot pattern background -->
		<div class="dot-pattern absolute inset-0"></div>
		<div class="hex-container relative h-28 flex items-center justify-center">
			<!-- Driving Port (left) -->
			<div class="port port-driving absolute left-2">
				<div class="port-box">
					<span class="port-label">Driving</span>
				</div>
				<div class="port-connector"></div>
			</div>

			<!-- Domain Hexagon (center) -->
			<div class="hexagon-wrapper">
				<svg class="hexagon" viewBox="0 0 100 100" fill="none">
					<path
						class="hex-path"
						d="M50 5 L93 27.5 L93 72.5 L50 95 L7 72.5 L7 27.5 Z"
						stroke="currentColor"
						stroke-width="2"
						fill="currentColor"
						fill-opacity="0.1"
					/>
				</svg>
				<span class="hex-label">Domain</span>
			</div>

			<!-- Driven Port (right) -->
			<div class="port port-driven absolute right-2">
				<div class="port-connector"></div>
				<div class="port-box">
					<span class="port-label">Driven</span>
				</div>
			</div>
		</div>
	</div>
</FeatureCard>

<style>
	.ports-illustration {
		position: relative;
		overflow: hidden;
	}

	.dot-pattern {
		background: radial-gradient(rgba(64, 222, 191, 0.25) 0.75px, transparent 0.75px);
		background-size: 8px 8px;
		opacity: 0.5;
		transition: opacity 0.5s ease-out;
	}

	:global(.group:hover) .dot-pattern {
		opacity: 0.9;
	}

	.hex-container {
		padding: 0 16px;
		position: relative;
		z-index: 1;
	}

	/* Hexagon */
	.hexagon-wrapper {
		position: relative;
		display: flex;
		flex-direction: column;
		align-items: center;
		z-index: 10;
	}

	.hexagon {
		width: 60px;
		height: 60px;
		color: rgba(64, 222, 191, 0.3);
		transition: all 0.4s ease-out;
	}

	.hex-path {
		stroke-dasharray: 300;
		stroke-dashoffset: 0;
	}

	.hex-label {
		font-size: 10px;
		color: rgba(255, 255, 255, 0.5);
		margin-top: 4px;
		transition: all 0.3s ease-out;
	}

	:global(.group:hover) .hexagon {
		color: rgba(64, 222, 191, 0.8);
		filter: drop-shadow(0 0 12px rgba(64, 222, 191, 0.4));
		transform: scale(1.05);
	}

	:global(.group:hover) .hex-label {
		color: rgba(255, 255, 255, 0.9);
	}

	/* Ports */
	.port {
		display: flex;
		align-items: center;
		gap: 4px;
		opacity: 0;
		transition: all 0.4s ease-out;
	}

	.port-driving {
		transform: translateX(-20px);
	}

	.port-driven {
		transform: translateX(20px);
	}

	:global(.group:hover) .port {
		opacity: 1;
		transform: translateX(0);
	}

	:global(.group:hover) .port-driving {
		transition-delay: 0.2s;
	}

	:global(.group:hover) .port-driven {
		transition-delay: 0.4s;
	}

	.port-box {
		padding: 6px 10px;
		border-radius: 6px;
		background: rgba(107, 122, 171, 0.15);
		border: 1px solid rgba(107, 122, 171, 0.25);
		transition: all 0.3s ease-out;
	}

	.port-driving .port-box {
		background: rgba(50, 69, 255, 0.15);
		border-color: rgba(50, 69, 255, 0.25);
	}

	.port-driven .port-box {
		background: rgba(188, 82, 238, 0.15);
		border-color: rgba(188, 82, 238, 0.25);
	}

	:global(.group:hover) .port-driving .port-box {
		background: rgba(50, 69, 255, 0.25);
		border-color: rgba(50, 69, 255, 0.5);
		box-shadow: 0 0 12px rgba(50, 69, 255, 0.3);
	}

	:global(.group:hover) .port-driven .port-box {
		background: rgba(188, 82, 238, 0.25);
		border-color: rgba(188, 82, 238, 0.5);
		box-shadow: 0 0 12px rgba(188, 82, 238, 0.3);
	}

	.port-label {
		font-size: 9px;
		font-weight: 500;
		color: rgba(255, 255, 255, 0.7);
		white-space: nowrap;
	}

	.port-driving .port-label {
		color: rgba(50, 69, 255, 0.9);
	}

	.port-driven .port-label {
		color: rgba(188, 82, 238, 0.9);
	}

	:global(.group:hover) .port-driving .port-label {
		color: rgba(129, 140, 248, 1);
	}

	:global(.group:hover) .port-driven .port-label {
		color: rgba(216, 180, 254, 1);
	}

	/* Connectors */
	.port-connector {
		width: 20px;
		height: 2px;
		background: rgba(107, 122, 171, 0.3);
		position: relative;
		transition: all 0.3s ease-out;
	}

	.port-connector::after {
		content: '';
		position: absolute;
		top: -3px;
		width: 0;
		height: 0;
		border-style: solid;
		transition: all 0.3s ease-out;
	}

	.port-driving .port-connector::after {
		right: -6px;
		border-width: 4px 0 4px 6px;
		border-color: transparent transparent transparent rgba(50, 69, 255, 0.5);
	}

	.port-driven .port-connector::after {
		left: -6px;
		border-width: 4px 6px 4px 0;
		border-color: transparent rgba(188, 82, 238, 0.5) transparent transparent;
	}

	:global(.group:hover) .port-driving .port-connector {
		background: linear-gradient(90deg, rgba(50, 69, 255, 0.3), rgba(64, 222, 191, 0.5));
		width: 30px;
	}

	:global(.group:hover) .port-driven .port-connector {
		background: linear-gradient(90deg, rgba(64, 222, 191, 0.5), rgba(188, 82, 238, 0.3));
		width: 30px;
	}

	:global(.group:hover) .port-driving .port-connector::after {
		border-color: transparent transparent transparent rgba(64, 222, 191, 1);
	}

	:global(.group:hover) .port-driven .port-connector::after {
		border-color: transparent rgba(64, 222, 191, 1) transparent transparent;
	}
</style>
