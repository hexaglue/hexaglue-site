---
import MainLayout from '~/layouts/MainLayout.astro';
import { Icon } from 'astro-icon/components';
import { Code } from 'astro-expressive-code/components';
import StepNavigation from './_components/StepNavigation.astro';
import AuditReport from './_components/AuditReport.astro';
import AuditVerdict from './_components/AuditVerdict.astro';
import KpiTable, { type KpiRow } from './_components/KpiTable.astro';
import ViolationsTable, { type ViolationRow } from './_components/ViolationsTable.astro';
import MetricsTable from './_components/MetricsTable.astro';
import InventoryTable, { type InventoryRow } from './_components/InventoryTable.astro';
import PackageStabilityTable, { type PackageStabilityRow } from './_components/PackageStabilityTable.astro';
import RemediationTable, { type RemediationRow } from './_components/RemediationTable.astro';
import SectionCopy from '../../_components/SectionCopy.astro';
import AmberStardust from '../../_components/landing-page/AmberStardust.astro';
import Insight from '~/components/Insight.astro';
import ModificationList from './_components/ModificationList.astro';
import ModificationGroup from './_components/ModificationGroup.astro';
import ModificationItem from './_components/ModificationItem.astro';

const drivingPortCode = `public interface OrderUseCases {
    OrderResponse createOrder(CreateOrderRequest request);
    OrderResponse placeOrder(Long orderId);
    OrderResponse cancelOrder(Long orderId, String reason);
    OrderResponse getOrder(Long orderId);
    OrderResponse getOrderByNumber(String orderNumber);
    List<OrderResponse> getOrdersByCustomer(Long customerId);
}`;

const applicationServiceCode = `@Service
@Transactional
public class OrderApplicationService implements OrderUseCases {

    private final OrderRepository orderRepository;
    private final CustomerRepository customerRepository;
    private final ProductRepository productRepository;
    private final InventoryUseCases inventoryUseCases;
    private final NotificationSender notificationSender;

    public OrderApplicationService(
            OrderRepository orderRepository,
            CustomerRepository customerRepository,
            ProductRepository productRepository,
            InventoryUseCases inventoryUseCases,
            NotificationSender notificationSender) {
        this.orderRepository = orderRepository;
        // ...
    }
}`;

const dualInterfaceRepoCode = `@Repository
public interface JpaOrderRepository
        extends JpaRepository<Order, Long>, OrderRepository {
}`;

const packageStructure = `com.acme.shop/
├── domain/
│   ├── shared/         (BaseEntity)
│   ├── order/          (Order, OrderLine, OrderStatus)
│   ├── customer/       (Customer)
│   ├── product/        (Product, Category)
│   ├── inventory/      (Inventory, StockMovement)
│   ├── payment/        (Payment, PaymentStatus)
│   └── shipping/       (Shipment, ShippingRate)
├── ports/
│   ├── in/             (7 driving ports)
│   └── out/            (8 driven ports)
├── application/        (7 *ApplicationService)
└── infrastructure/
    ├── web/            (5 controllers + dto/)
    ├── persistence/    (6 JpaXxxRepository)
    ├── external/       (2 adapters)
    └── config/         (AppConfig, SecurityConfig)`;

const kpiRows: KpiRow[] = [
    { dimension: 'DDD Compliance', value: '0%', weight: '25%', contribution: '0.0', threshold: '≥ 90%', status: 'CRITICAL', delta: '=' },
    { dimension: 'Hexagonal Architecture', value: '100%', weight: '25%', contribution: '25.0', threshold: '≥ 90%', status: 'OK', delta: '+60' },
    { dimension: 'Dependencies', value: '0%', weight: '20%', contribution: '0.0', threshold: '≥ 80%', status: 'CRITICAL', delta: '=' },
    { dimension: 'Coupling', value: '37%', weight: '15%', contribution: '5.6', threshold: '≥ 70%', status: 'CRITICAL', delta: '+16' },
    { dimension: 'Cohesion', value: '64%', weight: '15%', contribution: '9.6', threshold: '≥ 80%', status: 'CRITICAL', delta: '+6' },
];

const inventoryRows: InventoryRow[] = [
    { component: 'Aggregate Roots', count: 0, delta: '=', observation: '' },
    { component: 'Entities', count: 9, delta: '=', observation: 'Toujours @Entity JPA' },
    { component: 'Value Objects', count: 3, delta: '-3', observation: '3 enums conservés' },
    { component: 'Identifiers', count: 0, delta: '=', observation: '' },
    { component: 'Domain Events', count: 0, delta: '=', observation: '' },
    { component: 'Driving Ports', count: 6, delta: '+6', observation: '6 *UseCases créés' },
    { component: 'Driven Ports', count: 9, delta: '+3', observation: '6 repos + 3 ports externes' },
];

const violationRows: ViolationRow[] = [
    { constraint: 'ddd:entity-identity', count: 9, severity: 'CRITICAL', delta: '=', observation: 'Mêmes 9 entités sans identité' },
    { constraint: 'ddd:domain-purity', count: 9, severity: 'CRITICAL', delta: '=', observation: '9 classes model/ avec imports JPA' },
    { constraint: 'hexagonal:port-coverage', count: 0, severity: 'MAJOR', delta: '-6', observation: 'Tous les ports ont un adaptateur' },
    { constraint: 'hexagonal:port-direction', count: 0, severity: 'MAJOR', delta: '-6', observation: 'Tous les driven ports utilisés' },
];

const packageStabilityRows: PackageStabilityRow[] = [
    { package: 'ports.out', ca: 15, ce: 9, instability: 0.38, abstractness: 1.00, distance: 0.38, zone: 'Main Sequence' },
    { package: 'ports.in', ca: 12, ce: 9, instability: 0.43, abstractness: 1.00, distance: 0.43, zone: 'Main Sequence' },
    { package: 'domain.order', ca: 7, ce: 3, instability: 0.30, abstractness: 0.00, distance: 0.70, zone: 'Main Sequence' },
    { package: 'domain.product', ca: 9, ce: 1, instability: 0.10, abstractness: 0.00, distance: 0.90, zone: 'Zone of Pain' },
    { package: 'application', ca: 0, ce: 26, instability: 1.00, abstractness: 0.00, distance: 0.00, zone: 'Main Sequence' },
];

const remediationRows: RemediationRow[] = [
    {
        constraint: 'ddd:entity-identity',
        violations: 9,
        severity: 'CRITICAL',
        manualEffort: 4.5,
        hexaglueEffort: 4.5,
        description: 'Entités sans identifiant typé',
    },
    {
        constraint: 'ddd:domain-purity',
        violations: 9,
        severity: 'CRITICAL',
        manualEffort: 13.5,
        hexaglueEffort: 13.5,
        description: 'Annotations JPA dans le domaine',
    },
    {
        constraint: 'hexagonal:port-coverage',
        violations: 0,
        severity: 'MAJOR',
        manualEffort: 0,
        hexaglueEffort: 0,
        description: 'Ports couverts par des adaptateurs',
    },
    {
        constraint: 'hexagonal:port-direction',
        violations: 0,
        severity: 'MAJOR',
        manualEffort: 0,
        hexaglueEffort: 0,
        description: 'Ports correctement orientés',
    },
];
---

<MainLayout
    title="Étape 3 - Réorganisation en couches hexagonales | Migration E-Commerce"
    description="Restructuration en architecture hexagonale : création de 7 driving ports, 8 driven ports et 7 services applicatifs. Score 40/100, violations -12."
>
    <!-- Hero Section -->
    <section class="pt-24 pb-16 md:pt-32 md:pb-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <AmberStardust height="h-64 md:h-80" />
        <div class="max-w-5xl mx-auto">
            <div class="mt-8 max-w-3xl">
                <span class="bg-clip-text text-transparent bg-orange-yellow-gradient font-semibold text-sm uppercase tracking-wider">
                    Étape 3
                </span>
                <h1 class="mt-4 font-heading heading-bold text-4xl md:text-5xl lg:text-6xl text-white text-balance">
                    Réorganisation en couches hexagonales
                </h1>
                <a
                  href="https://github.com/hexaglue/case-study-ecommerce/tree/step/3-hexagonal"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="mt-4 px-4 py-2 group inline-flex items-center justify-center gap-2 rounded-full border border-astro-dark-100/30 hover:border-astro-dark-100/60 text-base font-normal text-astro-gray-200 hover:text-astro-gray-100 bg-astro-dark-600/30 transition-all ease-in-out duration-500"
                >
                  <Icon name="logos/github" class="size-5" aria-hidden="true" />
                  <code class="text-sm text-amber-400">step/3-hexagonal</code>
                </a>
                <ul class="mt-6 text-lg text-astro-gray-200 font-light max-w-2xl space-y-1 list-disc list-inside">
                    <li>Réorganisation des packages selon l'architecture hexagonale.</li>
                    <li>Création de ports (driving et driven).</li>
                    <li>Services applicatifs et repositories en double interface.</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Modifications effectuées -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Modifications"
                title="Modifications effectuées"
                gradient="bg-orange-yellow-gradient"
            >
                L'application est restructurée selon l'architecture hexagonale : le domaine est séparé de l'infrastructure par des ports (interfaces), et des services applicatifs orchestrent les cas d'usage.
            </SectionCopy>
            <ModificationList class="mt-10">
                <ModificationGroup layer="domain">
                    <ModificationItem action="move" count={13} label="classes domaine" details="vers domain/order, domain/customer, domain/product, etc." />
                </ModificationGroup>
                <ModificationGroup layer="application">
                    <ModificationItem action="create" count={7} label="services applicatifs" details="OrderApplicationService, CustomerApplicationService, etc." />
                </ModificationGroup>
                <ModificationGroup layer="ports">
                    <ModificationItem action="define" count={7} label="driving ports" details="OrderUseCases, CustomerUseCases, ProductUseCases, etc." />
                    <ModificationItem action="define" count={8} label="driven ports" details="OrderRepository, CustomerRepository, NotificationSender, etc." />
                </ModificationGroup>
                <ModificationGroup layer="adapters">
                    <ModificationItem action="implement" count={6} label="driven adapters" details="JpaOrderRepository extends JpaRepository, OrderRepository" />
                    <ModificationItem action="implement" count={2} label="adapters externes" details="PaymentGatewayAdapter, NotificationAdapter" />
                </ModificationGroup>
                <ModificationGroup layer="configuration">
                    <ModificationItem action="configure" label="hexaglue.yaml" details="exclude: infrastructure.**, application.**" />
                </ModificationGroup>
            </ModificationList>

            <Insight>
                <ul>
                    <li><strong>Driving ports</strong> (ports entrants) : interfaces qui exposent les cas d'usage au monde extérieur (ex. <code>OrderUseCases</code>)</li>
                    <li><strong>Driven ports</strong> (ports sortants) : interfaces qui abstraient les dépendances externes (ex. <code>OrderRepository</code>, <code>NotificationSender</code>)</li>
                </ul>
                <p>Cette inversion de dépendance permet au domaine de ne dépendre que d'abstractions, pas d'implémentations concrètes.</p>
            </Insight>

            <Insight title="Pourquoi seulement les adaptateurs ?" variant="green" icon="ri/question-line">
                <p>HexaGlue peut générer automatiquement toute la couche d'infrastructure : adaptateurs JPA, entités de persistance, mappers domaine/JPA, embeddables, repositories.<br>
                Ici, on choisit de n'implémenter que les adaptateurs, pour trois raisons :</p>
                <ul>
                    <li><strong>Supprimer du bruit</strong> : résoudre les violations <code>port-coverage</code> et <code>port-direction</code> pour que le rapport se concentre sur les vrais problèmes</li>
                    <li><strong>Progressivité</strong> : avancer étape par étape pour mesurer l'impact de chaque changement dans le rapport d'audit</li>
                    <li><strong>Pédagogie</strong> : comprendre chaque transformation en détail avant de la confier à la génération</li>
                </ul>
                <p>La génération automatique par HexaGlue sera introduite à l'étape 5.</p>
            </Insight>
        </div>
    </section>

    <!-- Structure hexagonale -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Structure"
                title="Organisation des packages"
                gradient="bg-orange-yellow-gradient"
            >
                L'arborescence de packages reflète la séparation en couches hexagonales : domaine, ports, application et infrastructure.
            </SectionCopy>

            <div class="mt-10">
                <Code code={packageStructure} lang="text" title="Structure hexagonale" />
            </div>

            <Insight>
                <ul>
                    <li><strong>domain/</strong> : organisé par sous-domaine métier (order, customer, product...), contient les entités et la logique</li>
                    <li><strong>ports/</strong> : contrats d'interface, séparés en <code>in/</code> (driving) et <code>out/</code> (driven)</li>
                    <li><strong>application/</strong> : services applicatifs qui implémentent les driving ports et orchestrent le domaine</li>
                    <li><strong>infrastructure/</strong> : implémentations concrètes (JPA, REST, adapters externes)</li>
                </ul>
            </Insight>
        </div>
    </section>

    <!-- Exemples de code -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Code"
                title="Exemples de code"
                gradient="bg-orange-yellow-gradient"
            >
                Trois extraits illustrent les patterns clés de l'architecture hexagonale : un driving port, un service applicatif, et un repository en double interface.
            </SectionCopy>

            <div class="mt-10 space-y-6">
                <Code code={drivingPortCode} lang="java" title="OrderUseCases.java - Driving Port" />
                <Code code={applicationServiceCode} lang="java" title="OrderApplicationService.java" />
                <Code code={dualInterfaceRepoCode} lang="java" title="JpaOrderRepository.java - Dual Interface" />
            </div>

            <Insight>
                <ul>
                    <li><strong>Driving port</strong> : l'interface <code>OrderUseCases</code> définit les cas d'usage sans référence à une technologie</li>
                    <li><strong>Service applicatif</strong> : implémente le driving port et orchestre le domaine en s'appuyant sur les driven ports</li>
                    <li><strong>Double interface</strong> : le repository JPA implémente à la fois <code>JpaRepository</code> (Spring Data) et le port domaine <code>OrderRepository</code></li>
                </ul>
            </Insight>
        </div>
    </section>

    <AuditReport description="Résultat après restructuration hexagonale avec création des ports et services applicatifs.">

    <!-- Verdict de l'audit -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Verdict"
                title="Verdict de l'audit"
                gradient="bg-orange-yellow-gradient"
            >
                Le verdict montre l'impact de la restructuration hexagonale sur le score global.
                Les violations MAJOR ont toutes été résolues, seules les violations CRITICAL liées au DDD persistent.
            </SectionCopy>

            <div class="mt-10">
                <AuditVerdict
                    score={40}
                    grade="F"
                    status="FAILED"
                    violations={{ critical: 18, major: 0 }}
                    delta={{ score: 19, violations: -12 }}
                />
            </div>

            <Insight>
                <ul>
                    <li><strong>+19 points</strong> : la mise en place des ports et services applicatifs fait bondir le score</li>
                    <li><strong>0 violation MAJOR</strong> : toutes les violations hexagonales (port-coverage, port-direction) sont résolues</li>
                    <li><strong>18 violations CRITICAL</strong> restantes : elles concernent toutes le couplage domaine/JPA, un problème structurel que la réorganisation en couches ne suffit pas à résoudre</li>
                </ul>
            </Insight>
        </div>
    </section>

    <!-- Indicateurs clés -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Score"
                title="Décomposition du score"
                gradient="bg-orange-yellow-gradient"
            >
                Le score passe de 21 à 40/100. La dimension Hexagonal Architecture atteint 100%, mais les dimensions DDD restent à zéro.
            </SectionCopy>

            <div class="mt-10">
                <KpiTable rows={kpiRows} total="40.2" />
            </div>

            <Insight>
                <ul>
                    <li><strong>Hexagonal Architecture</strong> à 100% (+60) : tous les ports sont détectés, chacun a son adaptateur, et les directions sont correctes</li>
                    <li><strong>Coupling</strong> et <strong>Cohesion</strong> progressent : la séparation en couches améliore la structure des dépendances</li>
                    <li><strong>DDD Compliance</strong> et <strong>Dependencies</strong> restent à 0% : les entités JPA n'ont pas d'identifiants typés et le domaine dépend toujours de l'infrastructure</li>
                </ul>
            </Insight>
        </div>
    </section>

    <!-- Inventaire architectural -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Inventaire"
                title="Inventaire architectural"
                gradient="bg-orange-yellow-gradient"
            >
                L'inventaire montre l'apparition des ports, composants fondamentaux de l'architecture hexagonale qui étaient absents aux étapes précédentes.
            </SectionCopy>

            <div class="mt-10">
                <InventoryTable rows={inventoryRows} />
            </div>

            <Insight>
                <ul>
                    <li><strong>6 driving ports</strong> créés : un par cas d'usage métier (<code>OrderUseCases</code>, <code>CustomerUseCases</code>...)</li>
                    <li><strong>9 driven ports</strong> : les 6 repositories existants plus 3 ports vers des systèmes externes</li>
                    <li>Les 9 entités restent classifiées <strong>ENTITY</strong> et non AGGREGATE_ROOT : sans identifiants typés, HexaGlue ne peut pas les promouvoir</li>
                </ul>
            </Insight>
        </div>
    </section>

    <!-- Violations détectées -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Violations"
                title="Violations détectées"
                gradient="bg-orange-yellow-gradient"
            >
                La création des ports et adaptateurs résout toutes les violations hexagonales.
                Les violations restantes sont exclusivement liées au DDD.
            </SectionCopy>

            <div class="mt-10">
                <ViolationsTable rows={violationRows} />
            </div>

            <Insight>
                <ul>
                    <li><strong>port-coverage</strong> et <strong>port-direction</strong> passent à 0 : chaque port a son adaptateur, et les directions sont respectées</li>
                    <li><strong>entity-identity</strong> (9) et <strong>domain-purity</strong> (9) sont inchangées : les entités utilisent toujours un <code>Long id</code> et importent <code>javax.persistence</code></li>
                </ul>
                <p>La prochaine étape devra s'attaquer à ces violations DDD en purifiant le domaine.</p>
            </Insight>
        </div>
    </section>

    <!-- Métriques techniques -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Qualité"
                title="Métriques de qualité"
                gradient="bg-orange-yellow-gradient"
            >
                Les métriques de qualité montrent que la restructuration en couches n'améliore pas la pureté du domaine.
                Le code métier reste pollué par les annotations JPA.
            </SectionCopy>

            <div class="mt-10">
                <MetricsTable
                    rows={[
                        { metric: 'Domain coverage', value: '44.44%', threshold: 'min 30%', status: 'OK', delta: '-26.99' },
                        { metric: 'Code boilerplate', value: '100.00%', threshold: 'max 50%', status: 'CRITICAL', delta: '=' },
                        { metric: 'Domain purity', value: '25.00%', threshold: 'min 100%', status: 'CRITICAL', delta: '-15.00' },
                        { metric: 'Aggregate boundary', value: '0.00%', threshold: 'min 80%', status: 'CRITICAL', delta: '=' },
                        { metric: 'Code complexity', value: '1.00', threshold: 'max 10', status: 'OK', delta: '=' }
                    ]}
                />
            </div>

            <Insight>
                <ul>
                    <li><strong>Domain purity</strong> recule à 25% : le domaine contient maintenant proportionnellement plus de classes impures car les services (exclus) ne sont plus comptabilisés</li>
                    <li><strong>Code boilerplate</strong> toujours à 100% : tant que les entités portent des annotations JPA, le domaine est entièrement technique</li>
                    <li><strong>Domain coverage</strong> recule à 44% : le périmètre analysé a changé avec la nouvelle structure de packages</li>
                </ul>
            </Insight>
        </div>
    </section>

    <!-- Coût de remédiation -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Remédiation"
                title="Coût de mise en conformité"
                gradient="bg-orange-yellow-gradient"
            >
                Le tableau de remédiation est recalculé. Les contraintes hexagonales étant résolues, seules les contraintes DDD restent à traiter.
            </SectionCopy>

            <div class="mt-10">
                <RemediationTable rows={remediationRows} />
            </div>

            <Insight>
                <ul>
                    <li><strong>port-coverage</strong> et <strong>port-direction</strong> à 0 violation : plus aucun effort nécessaire sur la couche hexagonale</li>
                    <li><strong>18 jours restants</strong> : concentrés sur la purification du domaine (suppression des annotations JPA, création des identifiants typés)</li>
                    <li>L'effort total a été <strong>divisé par 2</strong> par rapport à l'étape précédente (37,5j &rarr; 18j)</li>
                </ul>
            </Insight>
        </div>
    </section>

    <!-- Stabilité des packages -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Stabilité"
                title="Stabilité des packages"
                gradient="bg-orange-yellow-gradient"
            >
                L'analyse de stabilité montre l'impact de la restructuration sur les dépendances entre packages.
                Les packages de ports sont maintenant bien positionnés sur la Main Sequence.
            </SectionCopy>

            <div class="mt-10">
                <PackageStabilityTable rows={packageStabilityRows} />
            </div>

            <Insight>
                <ul>
                    <li><strong>ports.in</strong> et <strong>ports.out</strong> sur la Main Sequence : abstraits (100%) et stables, c'est exactement le rôle attendu des ports</li>
                    <li><strong>application</strong> instable à 100% : normal, les services applicatifs dépendent de tout mais personne ne dépend d'eux directement</li>
                    <li><strong>domain.product</strong> en Zone of Pain (D=0.90) : ce package est très sollicité mais sans abstraction, il faudra à terme introduire des interfaces</li>
                </ul>
            </Insight>
        </div>
    </section>

    </AuditReport>

    <!-- Bilan Section -->
    <section class="py-16 md:py-20 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <SectionCopy
                label="Bilan"
                title="Ce que révèle cette étape"
                gradient="bg-orange-yellow-gradient"
            >
                La restructuration hexagonale est en place. Le code est organisé en couches avec des ports et des adaptateurs, mais le domaine lui-même n'a pas encore été touché.
            </SectionCopy>

            <Insight class="mt-10">
                <p>Les constats principaux :</p>
                <ul>
                    <li><strong>Score 40/100 (+19)</strong> : la dimension Hexagonal Architecture atteint 100%</li>
                    <li><strong>0 violation MAJOR</strong> : toutes les contraintes hexagonales sont satisfaites</li>
                    <li><strong>DDD Compliance à 0%</strong> : le domaine reste couplé à JPA, sans identifiants typés ni agrégats</li>
                    <li><strong>Remédiation divisée par 2</strong> : de 37,5 à 18 jours, concentrés sur la purification du domaine</li>
                </ul>
                <p>L'étape suivante consiste à purifier le domaine : créer des identifiants typés et supprimer les annotations JPA.</p>
            </Insight>
        </div>
    </section>

    <!-- Step Navigation -->
    <section class="py-16 relative w-full max-w-4xl mx-auto px-4 sm:px-8">
        <div class="max-w-5xl mx-auto">
            <StepNavigation
                prev={{ href: '/case-studies/ecommerce-migration/step-2-configured/', label: 'Étape 2 - Suppression du bruit' }}
                next={{ href: '/case-studies/ecommerce-migration/step-4-pure-domain/', label: 'Étape 4 - Purification du domaine' }}
            />
        </div>
    </section>
</MainLayout>
