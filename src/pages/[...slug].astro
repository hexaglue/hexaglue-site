---
import { type CollectionEntry, getCollection, render } from 'astro:content';
import MainLayout from '~/layouts/MainLayout.astro';
import PageBackground from '~/components/PageBackground.astro';

export type Props = {
	page: CollectionEntry<'pages'>;
};

export async function getStaticPaths() {
	const pages = await getCollection('pages');
	return pages.map((page) => ({
		params: { slug: page.id },
		props: { page },
	}));
}

const { page } = Astro.props;
const { data } = page;
const { Content } = await render(page);
---

<MainLayout
	title={data.seo.title}
	description={data.seo.description}
>
	<section class="relative mx-auto max-w-screen-lg px-4 py-12 sm:px-8 sm:py-16 md:py-20 lg:py-24">
		<PageBackground section={data.section} />
		<article class="prose prose-invert prose-lg max-w-none">
			<Content />
		</article>
	</section>
</MainLayout>
