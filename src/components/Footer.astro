---
import { Icon } from 'astro-icon/components';
import siteInfo from '~/data/site-info.js';
import SocialLinks from './SocialLinks.astro';

interface Props {
	bgClass?: string;
}

const { bgClass = 'bg-dark' } = Astro.props;

type Link = {
	href: string;
	label: string;
};

type LinkGroup = {
	title: string;
	links: Link[];
};

const groups: LinkGroup[] = [
	{
		title: 'Ressources',
		links: [
			{ label: 'Documentation', href: '/getting-started/' },
			{ label: 'Exemples', href: 'https://github.com/hexaglue/hexaglue/tree/main/examples' },
			{ label: 'GitHub', href: 'https://github.com/hexaglue/hexaglue' },
		],
	},
	{
		title: 'Entreprise',
		links: [
			{ label: 'Etude de cas', href: '/case-studies/' },
			{ label: 'Contact', href: '/contact/' },
		],
	},
	{
		title: 'Communauté',
		links: [
			{ label: 'GitHub Discussions', href: 'https://github.com/hexaglue/hexaglue/discussions' },
			{ label: 'Contribuer', href: 'https://github.com/hexaglue/hexaglue/blob/main/CONTRIBUTING.md' },
		],
	},
	{
		title: 'Légal',
		links: [
			{ label: 'Licence MPL 2.0', href: 'https://github.com/hexaglue/hexaglue/blob/main/LICENSE' },
		],
	},
];

const socialLinks = siteInfo.socialLinks;
---

<footer class:list={['w-full border-t border-astro-dark-100/20 relative z-10', bgClass]}>
	<div class="w-full max-w-screen-2xl mx-auto px-4 sm:px-8">
		<nav
			aria-label="Secondary"
			class="flex flex-col lg:flex-row justify-between gap-8 lg:gap-20 py-8 md:py-12"
		>
			<div class="flex flex-col gap-4 max-w-sm">
				<p class="font-heading text-white text-2xl" style="font-weight: 800;">HexaGlue</p>
				<p class="text-astro-gray-200 text-sm">
					Moteur d’analyse et d’automatisation architecturale qui s'active à la compilation des applications Java.
				</p>
			</div>

			<div class="gap-12 sm:gap-16 lg:gap-20 flex flex-wrap xl:grid xl:grid-cols-4">
				{
					groups.map(({ title, links }, index) => (
						<section class="group flex flex-col basis-32">
							<h2
								id={`footerHeading${index}`}
								class="mb-4 label-base leading-none text-white font-semibold"
							>
								{title}
							</h2>
							<ul aria-labelledby={`footerHeading${index}`} class="flex flex-col gap-2">
								{links.map(({ href, label }) => (
									<li>
										<a href={href} class="whitespace-nowrap link flex gap-2 items-center">
											{label}
										</a>
									</li>
								))}
							</ul>
						</section>
					))
				}
			</div>
		</nav>
		<hr class="border-astro-gray-500" />
		<nav
			aria-label="Legal"
			class="py-6 flex flex-col-reverse lg:flex-row items-center justify-between gap-4"
		>
			<div class="flex flex-col md:flex-row items-center gap-2 md:gap-6 text-base text-astro-gray-300">
				<Icon name="hexaglue/hexagon" size="24" aria-hidden="true" />
				<span>© {new Date().getFullYear()} Scalastic</span>
				<span>Publié sous licence <a href="https://github.com/hexaglue/hexaglue/blob/main/LICENSE" target="_blank" class="link">MPL-2.0</a></span>
				<span>Propulsé par <a href="https://astro.build" target="_blank" class="link">Astro</a></span>
			</div>
			<SocialLinks links={socialLinks} />
		</nav>
	</div>
</footer>
