---
import { Icon } from 'astro-icon/components';

interface Props {
	icon?: string;
	title: string;
	description?: string;
	href?: string;
	layout?: 'default' | 'tall' | 'wide';
	tint?: 'green' | 'amber';
}

const { icon, title, description, href, layout = 'default', tint = 'green' } = Astro.props;

const layoutClasses = {
	default: '',
	tall: 'md:row-span-2',
	wide: 'md:col-span-2',
};

const tintStyles = {
	green: {
		iconBg: 'bg-blue-green-gradient/10',
		iconText: 'text-astro-green',
		link: 'text-astro-green',
	},
	amber: {
		iconBg: 'bg-orange-yellow-gradient/10',
		iconText: 'text-[#FF7D54]',
		link: 'text-[#FF7D54]',
	},
};
---

<div
	class:list={[
		'feature-card group p-6 bg-astro-dark-800/40 border border-astro-dark-100/15 rounded-xl hover:border-astro-dark-100/30 transition-all duration-300',
		layoutClasses[layout],
	]}
	data-tint={tint}
>
	<div class="h-full flex flex-col">
		{
			icon && (
				<div class:list={['mb-4 p-2 w-fit rounded-lg group-hover:scale-110 transition-transform duration-300', tintStyles[tint].iconBg, tintStyles[tint].iconText]}>
					<Icon name={icon} class="size-5" aria-hidden="true" />
				</div>
			)
		}

		<h3 class="text-lg font-semibold text-white mb-2">{title}</h3>

		{description ? (
			<p class="text-sm text-astro-gray-200 font-light leading-relaxed flex-1">
				{description}
			</p>
		) : (
			<div class="text-sm text-astro-gray-200 font-light leading-relaxed flex-1">
				<slot />
			</div>
		)}

		<slot name="illustration" />

		{href && (
			<a href={href} title={`En savoir plus sur ${title}`} class:list={['mt-4 inline-flex items-center gap-1 text-sm hover:text-white transition-colors', tintStyles[tint].link]}>
				<span>En savoir plus</span>
				<svg class="size-4" viewBox="0 0 16 16" fill="none" aria-hidden="true">
					<path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
				</svg>
			</a>
		)}
	</div>
</div>

<style>
	.feature-card {
		position: relative;
	}

	.feature-card::before {
		content: '';
		position: absolute;
		inset: 20% 10%;
		background: linear-gradient(135deg, rgba(64, 222, 191, 0.15) 0%, rgba(51, 75, 169, 0.15) 100%);
		border-radius: 50%;
		filter: blur(40px);
		z-index: -1;
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 0.4s ease-out, transform 0.4s ease-out;
	}

	.feature-card[data-tint='amber']::before {
		background: linear-gradient(135deg, rgba(255, 125, 84, 0.15) 0%, rgba(248, 228, 46, 0.15) 100%);
	}

	.feature-card:hover::before {
		opacity: 1;
		transform: translateY(30px);
	}
</style>
